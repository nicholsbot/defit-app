"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{1966:(e,r,i)=>{i.r(r),i.d(r,{FirebaseClientProvider:()=>S,FirebaseContext:()=>f,FirebaseProvider:()=>p,FirestorePermissionError:()=>I,addDocumentNonBlocking:()=>A,deleteDocumentNonBlocking:()=>k,errorEmitter:()=>d,getSdks:()=>N,initializeFirebase:()=>C,initiateAnonymousSignIn:()=>P,initiateEmailSignIn:()=>R,initiateEmailSignUp:()=>U,setDocumentNonBlocking:()=>F,updateDocumentNonBlocking:()=>D,useAuth:()=>E,useCollection:()=>_,useDoc:()=>M,useFirebase:()=>h,useFirebaseApp:()=>v,useFirestore:()=>g,useMemoFirebase:()=>b,useUser:()=>w});var t=i(7358);let o={projectId:t.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"studio-3541826900-e65c5",appId:t.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:831310688334:web:0486a3d1d7d76e00d8131f",apiKey:t.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyCue0HweVo_KWC0nW1yqNHxt0oc_A4REXk",authDomain:t.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"studio-3541826900-e65c5.firebaseapp.com",measurementId:t.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"",messagingSenderId:t.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"831310688334"};var n=i(3915),s=i(3004),a=i(5317),u=i(5155),l=i(2115);let d=function(){let e={};return{on(r,i){var t;e[r]||(e[r]=[]),null==(t=e[r])||t.push(i)},off(r,i){var t;e[r]&&(e[r]=null==(t=e[r])?void 0:t.filter(e=>e!==i))},emit(r,i){var t;e[r]&&(null==(t=e[r])||t.forEach(e=>e(i)))}}}();function c(){let[e,r]=(0,l.useState)(null);if((0,l.useEffect)(()=>{let e=e=>{r(e)};return d.on("permission-error",e),()=>{d.off("permission-error",e)}},[]),e)throw e;return null}var m=i(4202);let f=(0,l.createContext)(void 0),p=e=>{let{children:r,firebaseApp:i,firestore:t,auth:o,demoMode:n=!1}=e,[a,d]=(0,l.useState)({user:null,isUserLoading:!0,userError:null});(0,l.useEffect)(()=>{if(n){(0,m.Z0)("Using demo user"),d({user:m.W0,isUserLoading:!1,userError:null});return}if(!o)return void d({user:null,isUserLoading:!1,userError:Error("Auth service not provided.")});d({user:null,isUserLoading:!0,userError:null});let e=(0,s.hg)(o,e=>{d({user:e,isUserLoading:!1,userError:null})},e=>{console.error("FirebaseProvider: onAuthStateChanged error:",e),d({user:null,isUserLoading:!1,userError:e})});return()=>e()},[o,n]);let p=(0,l.useMemo)(()=>({areServicesAvailable:!!(i&&t&&o)||n,firebaseApp:n?null:i,firestore:n?null:t,auth:n?null:o,user:a.user,isUserLoading:a.isUserLoading,userError:a.userError,demoMode:n}),[i,t,o,a,n]);return(0,u.jsxs)(f.Provider,{value:p,children:[(0,u.jsx)(c,{}),r]})},h=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useFirebase must be used within a FirebaseProvider.");if(e.demoMode)throw Error("Firebase services not available in demo mode. Use useUser() for auth state.");if(!e.areServicesAvailable||!e.firebaseApp||!e.firestore||!e.auth)throw Error("Firebase core services not available. Check FirebaseProvider props.");return{firebaseApp:e.firebaseApp,firestore:e.firestore,auth:e.auth,user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}},E=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useAuth must be used within a FirebaseProvider.");if(e.demoMode)throw Error("Firebase Auth not available in demo mode. Use useUser() for auth state.");if(!e.auth)throw Error("Firebase Auth not available.");return e.auth},g=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useFirestore must be used within a FirebaseProvider.");if(e.demoMode)throw Error("Firestore not available in demo mode.");if(!e.firestore)throw Error("Firestore not available.");return e.firestore},v=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useFirebaseApp must be used within a FirebaseProvider.");if(e.demoMode)throw Error("Firebase App not available in demo mode.");if(!e.firebaseApp)throw Error("Firebase App not available.");return e.firebaseApp};function b(e,r){let i=(0,l.useMemo)(e,r);return"object"!=typeof i||null===i||(i.__memo=!0),i}let w=()=>{let e=(0,l.useContext)(f);if(void 0===e)throw Error("useUser must be used within a FirebaseProvider.");return{user:e.user,isUserLoading:e.isUserLoading,userError:e.userError}};function S(e){let{children:r}=e,i=(0,l.useMemo)(()=>{try{if(m.Gc)return(0,m.Z0)("Running in demo mode - Firebase disabled"),null;return C()}catch(e){return console.warn("Firebase initialization failed, falling back to demo mode:",e),(0,m.Z0)("Firebase initialization failed, using demo mode"),null}},[]);return(0,u.jsx)(p,{firebaseApp:(null==i?void 0:i.firebaseApp)||null,auth:(null==i?void 0:i.auth)||null,firestore:(null==i?void 0:i.firestore)||null,demoMode:m.Gc||!i,children:r})}class I extends Error{constructor(e){let r=function(e){let r=null;try{let e=(0,s.xI)().currentUser;e&&(r=function(e){var r;if(!e)return null;let i={name:e.displayName,email:e.email,email_verified:e.emailVerified,phone_number:e.phoneNumber,sub:e.uid,firebase:{identities:e.providerData.reduce((e,r)=>(r.providerId&&(e[r.providerId]=[r.uid]),e),{}),sign_in_provider:(null==(r=e.providerData[0])?void 0:r.providerId)||"custom",tenant:e.tenantId}};return{uid:e.uid,token:i}}(e))}catch(e){}return{auth:r,method:e.operation,path:"/databases/(default)/documents/".concat(e.path),resource:e.requestResourceData?{data:e.requestResourceData}:void 0}}(e);super("Missing or insufficient permissions: The following request was denied by Firestore Security Rules:\n".concat(JSON.stringify(r,null,2))),this.name="FirebaseError",this.request=r}}function _(e){let[r,i]=(0,l.useState)(null),[t,o]=(0,l.useState)(!1),[n,s]=(0,l.useState)(null);if((0,l.useEffect)(()=>{if(!e){i(null),o(!1),s(null);return}o(!0),s(null);let r=(0,a.aQ)(e,e=>{let r=[];for(let i of e.docs)r.push({...i.data(),id:i.id});i(r),s(null),o(!1)},r=>{let t=new I({operation:"list",path:"collection"===e.type?e.path:e._query.path.canonicalString()});s(t),i(null),o(!1),d.emit("permission-error",t)});return()=>r()},[e]),e&&!e.__memo)throw Error(e+" was not properly memoized using useMemoFirebase");return{data:r,isLoading:t,error:n}}function M(e){let[r,i]=(0,l.useState)(null),[t,o]=(0,l.useState)(!1),[n,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(!e){i(null),o(!1),s(null);return}o(!0),s(null);let r=(0,a.aQ)(e,e=>{e.exists()?i({...e.data(),id:e.id}):i(null),s(null),o(!1)},r=>{let t=new I({operation:"get",path:e.path});s(t),i(null),o(!1),d.emit("permission-error",t)});return()=>r()},[e]),{data:r,isLoading:t,error:n}}function F(e,r,i){(0,a.BN)(e,r,i).catch(i=>{d.emit("permission-error",new I({path:e.path,operation:"write",requestResourceData:r}))})}function A(e,r){return(0,a.gS)(e,r).catch(i=>{d.emit("permission-error",new I({path:e.path,operation:"create",requestResourceData:r}))})}function D(e,r){(0,a.mZ)(e,r).catch(i=>{d.emit("permission-error",new I({path:e.path,operation:"update",requestResourceData:r}))})}function k(e){(0,a.kd)(e).catch(r=>{d.emit("permission-error",new I({path:e.path,operation:"delete"}))})}function P(e){(0,s.zK)(e)}function U(e,r,i){(0,s.eJ)(e,r,i)}function R(e,r,i){(0,s.x9)(e,r,i)}function C(){if(!(0,n.Dk)().length){let e;try{e=(0,n.Wp)()}catch(r){console.warn("Automatic initialization failed. Falling back to firebase config object.",r),e=(0,n.Wp)(o)}return N(e)}return N((0,n.Sx)())}function N(e){return{firebaseApp:e,auth:(0,s.xI)(e),firestore:(0,a.aU)(e)}}},4202:(e,r,i)=>{i.d(r,{Gc:()=>o,HP:()=>a,W0:()=>n,Z0:()=>u,rq:()=>s});var t=i(7358);let o="true"===t.env.NEXT_PUBLIC_DEMO_MODE||!t.env.NEXT_PUBLIC_FIREBASE_API_KEY&&!t.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,n={uid:"demo-user-123",email:"demo@example.com",displayName:"Demo Soldier",photoURL:null,emailVerified:!1,isAnonymous:!1,metadata:{creationTime:new Date().toISOString(),lastSignInTime:new Date().toISOString()},providerData:[],refreshToken:"",tenantId:null,delete:async()=>Promise.resolve(),getIdToken:async()=>"demo-token",getIdTokenResult:async()=>({authTime:new Date().toISOString(),expirationTime:new Date(Date.now()+36e5).toISOString(),issuedAtTime:new Date().toISOString(),signInProvider:"demo",signInSecondFactor:null,token:"demo-token",claims:{}}),reload:async()=>Promise.resolve(),toJSON:()=>({})},s=[{id:"1",userProfileId:"demo-user-123",week:1,workoutDate:new Date().toISOString(),tmarMMinutes:45,resistanceLbs:200,cardioMilesRunning:3,cardioMilesRucking:0,cardioMilesWalking:1,cardioMilesElliptical:2,cardioMilesRowing:0,cardioMetersSwimming:500,cardioMilesCycling:5,hiitMinutes:25},{id:"2",userProfileId:"demo-user-123",week:1,workoutDate:new Date(Date.now()-864e5).toISOString(),tmarMMinutes:30,resistanceLbs:150,cardioMilesRunning:2,cardioMilesRucking:1,cardioMilesWalking:.5,cardioMilesElliptical:1,cardioMilesRowing:1,cardioMetersSwimming:300,cardioMilesCycling:3,hiitMinutes:20},{id:"3",userProfileId:"demo-user-123",week:2,workoutDate:new Date(Date.now()-1728e5).toISOString(),tmarMMinutes:60,resistanceLbs:250,cardioMilesRunning:4,cardioMilesRucking:2,cardioMilesWalking:1.5,cardioMilesElliptical:3,cardioMilesRowing:2,cardioMetersSwimming:800,cardioMilesCycling:8,hiitMinutes:35}];function a(){return o}function u(e){o&&console.log("[DEMO MODE] ".concat(e))}},9434:(e,r,i)=>{i.d(r,{cn:()=>n});var t=i(2596),o=i(9688);function n(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return(0,o.QP)((0,t.$)(r))}}}]);