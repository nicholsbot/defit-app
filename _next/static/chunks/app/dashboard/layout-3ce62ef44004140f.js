(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{10:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>i,Rx:()=>g,Zr:()=>N,ck:()=>x,r7:()=>p,tv:()=>d,wd:()=>f});var s=a(5155),l=a(2115),r=a(2278),o=a(9434),n=a(285);let i=r.bL,d=r.l9,c=r.ZL,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});u.displayName=r.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="AlertDialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="AlertDialogFooter";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...l})});p.displayName=r.hE.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...l})});h.displayName=r.VY.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.rc,{ref:t,className:(0,o.cn)((0,n.r)(),a),...l})});g.displayName=r.rc.displayName;let N=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.ZD,{ref:t,className:(0,o.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});N.displayName=r.ZD.displayName},3605:(e,t,a)=>{Promise.resolve().then(a.bind(a,8400))},8400:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>T});var s=a(5155),l=a(2115),r=a(285),o=a(6215),n=a(3158),i=a(518),d=a(154),c=a(9434);let m=o.bL,u=o.l9;o.YJ,o.ZL,o.Pb,o.z6,l.forwardRef((e,t)=>{let{className:a,inset:l,children:r,...i}=e;return(0,s.jsxs)(o.ZP,{ref:t,className:(0,c.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...i,children:[r,(0,s.jsx)(n.A,{className:"ml-auto"})]})}).displayName=o.ZP.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(o.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=o.G5.displayName;let f=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsx)(o.UC,{ref:t,sideOffset:l,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});f.displayName=o.UC.displayName;let x=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(o.q7,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...r})});x.displayName=o.q7.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:r,...n}=e;return(0,s.jsxs)(o.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),l]})}).displayName=o.H_.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(o.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=o.hN.displayName;let p=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(o.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...r})});p.displayName=o.JU.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(o.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});h.displayName=o.wv.displayName;var g=a(1966),N=a(6766),b=a(6874),j=a.n(b),y=a(5695),w=a(3004),v=a(2360),k=a(4237),C=a(1950),R=a(4202);function _(){var e;let{user:t}=(0,g.useUser)(),a=null;try{a=(0,g.useAuth)()}catch(e){console.log("Auth not available - running in demo mode")}let o=(0,y.useRouter)(),{workoutLogs:n,userProfile:i}=(0,v.H)(),d=async()=>{try{if((0,R.HP)()||!a){(0,R.Z0)("Demo logout - redirecting to home"),o.push("/");return}await (0,w.CI)(a),o.push("/login")}catch(e){console.error("Logout Error:",e)}},c=(0,l.useMemo)(()=>{if(!n||0===n.length)return 0;let e={};n.forEach(t=>{e[t.week]||(e[t.week]={tmar:0,strength:0,hiit:0,cardio:0}),e[t.week].tmar+=t.tmarMMinutes,e[t.week].strength+=t.resistanceLbs,e[t.week].hiit+=t.hiitMinutes;let a=t.cardioMilesRunning/C.u_.RUN_RUCK_WALK.goal+t.cardioMilesRucking/C.u_.RUN_RUCK_WALK.goal+t.cardioMilesWalking/C.u_.RUN_RUCK_WALK.goal+t.cardioMilesElliptical/C.u_.ELLIPTICAL_ROW.goal+t.cardioMilesRowing/C.u_.ELLIPTICAL_ROW.goal+t.cardioMetersSwimming/C.u_.SWIM.goal+t.cardioMilesCycling/C.u_.CYCLE.goal;e[t.week].cardio+=100*a});let t=Object.keys(e).length;if(0===t)return 0;let a=0,s=0,l=0,r=0;return Object.values(e).forEach(e=>{a+=e.tmar/C.Hk*100,s+=e.strength/C.Ct*100,l+=e.hiit/C.NU*100,r+=e.cardio}),(a/t+s/t+l/t+r/t)/4},[n]);return(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-16 max-w-screen-2xl items-center justify-between",children:[(0,s.jsx)(j(),{href:"/dashboard",className:"flex items-center gap-2 ml-2",children:(0,s.jsx)(N.default,{src:"/fonts/Images/defit logo 1.png",alt:"DEFIT Challenge Logo",width:150,height:75,className:"h-12 w-auto"})}),(0,s.jsxs)(m,{children:[(0,s.jsx)(u,{asChild:!0,children:(0,s.jsx)(r.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsx)(k.p,{src:(null==i?void 0:i.avatarUrl)||(null==t?void 0:t.photoURL)||void 0,fallback:(null==i||null==(e=i.displayName)?void 0:e.charAt(0))||"U",overallProgress:c,className:"h-9 w-9"})})}),(0,s.jsxs)(f,{className:"w-56",align:"end",forceMount:!0,children:[(0,s.jsx)(p,{className:"font-normal",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==i?void 0:i.displayName)||"Soldier"}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:(null==t?void 0:t.email)||""})]})}),(0,s.jsx)(h,{}),(0,s.jsx)(x,{asChild:!0,children:(0,s.jsx)(j(),{href:"/dashboard/profile",children:"Profile"})}),(0,s.jsx)(x,{asChild:!0,children:(0,s.jsx)(j(),{href:"/dashboard/settings",children:"Settings"})}),(0,s.jsx)(h,{}),(0,s.jsx)(x,{onClick:d,className:"cursor-pointer",children:"Logout"})]})]})]})})}let L=[{href:"/dashboard",label:"Dashboard"},{href:"/dashboard/missions",label:"Missions"},{href:"/dashboard/leaderboard",label:"Leaderboard"},{href:"/dashboard/resources",label:"Resources"},{href:"/dashboard/rules",label:"Rules"}];function A(){let e=(0,y.usePathname)();return(0,s.jsx)("div",{className:"w-full bg-card border-b",children:(0,s.jsx)("nav",{className:"container flex items-center overflow-x-auto",children:(0,s.jsx)("ul",{className:"flex space-x-2",children:L.map(t=>(0,s.jsx)("li",{children:(0,s.jsx)(j(),{href:t.href,className:(0,c.cn)("inline-block whitespace-nowrap px-3 py-3 text-sm font-medium transition-colors",e===t.href?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),children:t.label})},t.href))})})})}var E=a(10),U=a(5268);function z(e){let{isOpen:t,onClose:a,categoryName:l}=e;return t?(0,s.jsx)(E.Lt,{open:t,onOpenChange:a,children:(0,s.jsxs)(E.EO,{className:"w-full max-w-sm text-center p-8 bg-card border-accent shadow-lg",children:[(0,s.jsx)("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-accent/20 animate-in zoom-in-50 duration-500",children:(0,s.jsx)(U.A,{className:"h-12 w-12 text-primary animate-pulse"})}),(0,s.jsxs)(E.wd,{children:[(0,s.jsx)(E.r7,{className:"text-2xl font-bold text-foreground",children:"Goal Achieved!"}),(0,s.jsxs)(E.$v,{className:"text-muted-foreground",children:["Congratulations! You've met your weekly minimum for"," ",(0,s.jsx)("strong",{className:"text-primary",children:l}),". Keep pushing!"]})]})]})}):null}var M=a(6570);function O(e){let{isOpen:t,onClose:a}=e;return t?(0,s.jsx)(E.Lt,{open:t,onOpenChange:a,children:(0,s.jsxs)(E.EO,{className:"w-full max-w-md text-center p-8 bg-card border-accent shadow-lg",children:[(0,s.jsx)("div",{className:"mx-auto flex h-24 w-24 items-center justify-center rounded-full bg-accent/20 animate-in zoom-in-50 duration-500",children:(0,s.jsx)(M.A,{className:"h-16 w-16 text-primary animate-pulse"})}),(0,s.jsxs)(E.wd,{className:"mt-4",children:[(0,s.jsx)(E.r7,{className:"text-3xl font-bold text-foreground",children:"Weekly Mission Complete!"}),(0,s.jsx)(E.$v,{className:"text-lg text-muted-foreground mt-4 italic",children:'"You\'ve met the standard. Now, exceed it. Your discipline this week is a testament to your commitment. Stay focused, stay ready."'}),(0,s.jsx)("div",{className:"text-right not-italic font-semibold text-primary mt-2",children:"- CSM Betty"})]})]})}):null}function P(e){let{children:t}=e,{achievementToShow:a,setAchievementToShow:r,showWeeklyCompletion:o,setShowWeeklyCompletion:n,notificationSettings:i}=(0,v.H)(),[d,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(a&&i.showAchievementPopups){c(!0);let e=setTimeout(()=>{c(!1),setTimeout(()=>r(null),300)},3e3);return()=>clearTimeout(e)}},[a,r,i.showAchievementPopups]),(0,l.useEffect)(()=>{if(o&&i.showWeeklyCompletionPopups){u(!0);let e=setTimeout(()=>{u(!1),setTimeout(()=>n(!1),500)},5e3);return()=>clearTimeout(e)}},[o,n,i.showWeeklyCompletionPopups]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z,{isOpen:d,onClose:()=>{c(!1),setTimeout(()=>r(null),300)},categoryName:(null==a?void 0:a.categoryName)||""}),(0,s.jsx)(O,{isOpen:m,onClose:()=>{u(!1),setTimeout(()=>n(!1),500)}}),t]})}function T(e){let{children:t}=e;return(0,s.jsx)(P,{children:(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(_,{}),(0,s.jsx)(A,{}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-8",children:t})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,277,698,970,874,196,239,63,326,955,278,10,749,834,181,441,684,358],()=>t(3605)),_N_E=e.O()}]);